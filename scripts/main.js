const nouns = [
	'history',
	'way',
	'art',
	'world',
	'information',
	'map',
	'family',
	'government',
	'health',
	'system',
	'computer',
	'meat',
	'year',
	'butt',
	'music',
	'data',
	'food',
	'theory',
	'law',
	'bird',
	'literature',
	'problem',
	'software',
	'control',
	'power',
	'love',
	'internet',
	'television',
	'science',
	'library',
	'nature',
	'product',
	'temperature',
	'investment',
	'area',
	'story',
	'industry',
	'media',
	'thing',
	'oven',
	'definition',
	'language',
	'player',
	'video',
	'week',
	'country',
	'exam',
	'movie',
	'physics',
	'series',
	'thought',
	'thong',
	'boyfriend',
	'technology',
	'army',
	'camera',
	'freedom',
	'paper',
	'environment',
	'child',
	'month',
	'truth',
	'university',
	'writing',
	'article',
	'department',
	'difference',
	'goal',
	'news',
	'audience',
	'income',
	'marriage',
	'user',
	'combination',
	'failure',
	'meaning',
	'medicine',
	'philosophy',
	'teacher',
	'communication',
	'night',
	'chemistry',
	'disease',
	'disk',
	'energy',
	'road',
	'role',
	'soup',
	'success',
	'addition',
	'apartment',
	'education',
	'math',
	'painting',
	'politics',
	'attention',
	'decision',
	'event',
	'property',
	'student',
	'wood',
	'competition',
	'office',
	'president',
	'unit',
	'cigarette',
	'performance',
	'driver',
	'flight',
	'length',
	'magazine',
	'newspaper',
	'relationship',
	'cell',
	'dealer',
	'lake',
	'member',
	'message',
	'phone',
	'scene',
	'appearance',
	'death',
	'insurance',
	'mood',
	'woman',
	'blood',
	'opinion',
	'reality',
	'responsibility',
	'skill',
	'application',
	'city',
	'nipple',
	'county',
	'foundation',
	'grandmother',
	'heart',
	'photo',
	'recipe',
	'studio',
	'depression',
	'passion',
	'resource',
	'ad',
	'college',
	'connection',
	'criticism',
	'debt',
	'secretary',
	'solution',
	'director',
	'psychology',
	'storage',
	'alcohol',
	'complaint',
	'contract',
	'highway',
	'membership',
	'steak',
	'agreement',
	'cancer',
	'currency',
	'entry',
	'region',
	'tradition',
	'virus',
	'actor',
	'classroom',
	'delivery',
	'device',
	'difficulty',
	'election',
	'engine',
	'football',
	'guidance',
	'hotel',
	'anxiety',
	'atmosphere',
	'bath',
	'bread',
	'climate',
	'construction',
	'elevator',
	'emotion',
	'employee',
	'employer',
	'guest',
	'height',
	'mall',
	'operation',
	'sample',
	'charity',
	'disaster',
	'editor',
	'guitar',
	'homework',
	'leader',
	'outcome',
	'presentation',
	'promotion',
	'reflection',
	'refrigerator',
	'singer',
	'tennis',
	'basket',
	'bonus',
	'cabinet',
	'childhood',
	'church',
	'clothes',
	'coffee',
	'dinner',
	'drawing',
	'hair',
	'lab',
	'measurement',
	'mud',
	'orange',
	'poetry',
	'police',
	'queen',
	'restaurant',
	'sector',
	'signature',
	'song',
	'tooth',
	'town',
	'vehicle',
	'volume',
	'wife',
	'accident',
	'airport',
	'appointment',
	'arrival',
	'assumption',
	'baseball',
	'chapter',
	'conversation',
	'database',
	'error',
	'farmer',
	'gate',
	'hall',
	'hospital',
	'injury',
	'instruction',
	'maintenance',
	'meal',
	'perception',
	'pie',
	'proposal',
	'revolution',
	'river',
	'speech',
	'tea',
	'village',
	'warning',
	'winner',
	'breath',
	'chest',
	'chocolate',
	'cookie',
	'desk',
	'drawer',
	'garbage',
	'honey',
	'insect',
	'king',
	'ladder',
	'menu',
	'penalty',
	'piano',
	'potato',
	'profession',
	'salad',
	'sister',
	'supermarket',
	'tongue',
	'weakness',
	'wedding',
	'affair',
	'ambition',
	'apple',
	'bathroom',
	'bedroom',
	'beer',
	'birthday',
	'cheek',
	'departure',
	'diamond',
	'dirt',
	'ear',
	'fortune',
	'friendship',
	'funeral',
	'gene',
	'girlfriend',
	'hat',
	'midnight',
	'pizza',
	'platform',
	'pollution',
	'shirt',
	'speaker',
	'stranger',
	'surgery',
	'tale',
	'throat',
	'time',
	'work',
	'film',
	'water',
	'money',
	'example',
	'business',
	'study',
	'game',
	'life',
	'form',
	'air',
	'day',
	'place',
	'number',
	'part',
	'field',
	'fish',
	'back',
	'process',
	'heat',
	'hand',
	'book',
	'end',
	'point',
	'home',
	'economy',
	'body',
	'market',
	'guide',
	'state',
	'radio',
	'course',
	'company',
	'price',
	'card',
	'list',
	'mind',
	'trade',
	'line',
	'group',
	'risk',
	'word',
	'fat',
	'force',
	'key',
	'light',
	'name',
	'school',
	'top',
	'order',
	'research',
	'service',
	'piece',
	'web',
	'boss',
	'sport',
	'fun',
	'house',
	'page',
	'test',
	'sound',
	'soil',
	'board',
	'oil',
	'picture',
	'garden',
	'range',
	'future',
	'exercise',
	'image',
	'case',
	'coast',
	'boat',
	'building',
	'mouse',
	'cash',
	'class',
	'period',
	'plan',
	'store',
	'tax',
	'side',
	'subject',
	'space',
	'rule',
	'weather',
	'chance',
	'figure',
	'model',
	'source',
	'beginning',
	'earth',
	'program',
	'chicken',
	'design',
	'feature',
	'head',
	'material',
	'question',
	'rock',
	'salt',
	'act',
	'birth',
	'car',
	'dog',
	'object',
	'scale',
	'sun',
	'note',
	'speed',
	'style',
	'war',
	'bank',
	'boxers',
	'bus',
	'eye',
	'fire',
	'position',
	'pressure',
	'stress',
	'box',
	'frame',
	'step',
	'cycle',
	'face',
	'metal',
	'paint',
	'review',
	'room',
	'screen',
	'structure',
	'view',
	'account',
	'ball',
	'balance',
	'black',
	'bottom',
	'gift',
	'machine',
	'shape',
	'tool',
	'wind',
	'address',
	'average',
	'morning',
	'pot',
	'sign',
	'table',
	'credit',
	'egg',
	'hope',
	'ice',
	'square',
	'date',
	'link',
	'post',
	'star',
	'voice',
	'capital',
	'friend',
	'brush',
	'couple',
	'exit',
	'front',
	'function',
	'plant',
	'plastic',
	'summer',
	'track',
	'wing',
	'brain',
	'button',
	'foot',
	'gas',
	'rain',
	'wall',
	'base',
	'feeling',
	'savings',
	'sugar',
	'target',
	'text',
	'animal',
	'file',
	'testicles',
	'ground',
	'lesson',
	'minute',
	'phase',
	'sky',
	'stage',
	'stick',
	'title',
	'bowl',
	'bridge',
	'club',
	'edge',
	'evidence',
	'fan',
	'letter',
	'lock',
	'park',
	'quarter',
	'skin',
	'weight',
	'baby',
	'background',
	'dish',
	'fruit',
	'glass',
	'joint',
	'master',
	'muscle',
	'traffic',
	'trip',
	'vegetable',
	'chart',
	'gear',
	'kitchen',
	'mother',
	'net',
	'party',
	'sale',
	'season',
	'signal',
	'spirit',
	'street',
	'tree',
	'wave',
	'belt',
	'bench',
	'copy',
	'path',
	'project',
	'sea',
	'south',
	'ticket',
	'angle',
	'breakfast',
	'doctor',
	'dot',
	'dream',
	'hour',
	'juice',
	'limit',
	'luck',
	'milk',
	'mouth',
	'peace',
	'pipe',
	'seat',
	'stable',
	'storm',
	'team',
	'trick',
	'afternoon',
	'bat',
	'beach',
	'chain',
	'cream',
	'crew',
	'gold',
	'interview',
	'match',
	'mission',
	'pain',
	'pleasure',
	'score',
	'screw',
	'sex',
	'shop',
	'shower',
	'suit',
	'tone',
	'window',
	'agent',
	'band',
	'bone',
	'calendar',
	'cap',
	'coat',
	'corner',
	'court',
	'cup',
	'door',
	'east',
	'finger',
	'garage',
	'hole',
	'hook',
	'layer',
	'lie',
	'meeting',
	'nose',
	'parking',
	'partner',
	'profile',
	'rice',
	'routine',
	'schedule',
	'telephone',
	'tip',
	'winter',
	'bag',
	'battle',
	'bed',
	'bill',
	'bother',
	'cake',
	'code',
	'curve',
	'dress',
	'evening',
	'extension',
	'farm',
	'fight',
	'holiday',
	'horror',
	'horse',
	'host',
	'husband',
	'loan',
	'mistake',
	'mountain',
	'nail',
	'ass',
	'noise',
	'package',
	'patient',
	'pause',
	'proof',
	'race',
	'sand',
	'sentence',
	'shoulder',
	'smoke',
	'stomach',
	'string',
	'tourist',
	'towel',
	'vacation',
	'west',
	'wheel',
	'wine',
	'arm',
	'aside',
	'associate',
	'bet',
	'blow',
	'border',
	'branch',
	'breast',
	'brother',
	'chip',
	'cross',
	'document',
	'penis',
	'dust',
	'expert',
	'floor',
	'god',
	'golf',
	'iron',
	'judge',
	'knife',
	'mail',
	'opening',
	'parent',
	'pattern',
	'pin',
	'pool',
	'pound',
	'salary',
	'shelter',
	'shoe',
	'silver',
	'tank',
	'bar',
	'bell',
	'bike',
	'blame',
	'brick',
	'chair',
	'closet',
	'collar',
	'comment',
	'devil',
	'diet',
	'fuel',
	'glove',
	'jacket',
	'lunch',
	'monitor',
	'nurse',
	'peak',
	'plane',
	'reward',
	'sandwich',
	'spray',
	'surprise',
	'weekend',
	'alarm',
	'bicycle',
	'bite',
	'bottle',
	'cable',
	'candle',
	'vagina',
	'cloud',
	'concert',
	'counter',
	'flower',
	'grandfather',
	'knee',
	'lawyer',
	'leather',
	'mirror',
	'neck',
	'plate',
	'purple',
	'ruin',
	'ship',
	'skirt',
	'slice',
	'snow',
	'switch',
	'trash',
	'anger',
	'award',
	'bid',
	'boot',
	'bug',
	'camp',
	'candy',
	'carpet',
	'cat',
	'champion',
	'channel',
	'clock',
	'cow',
	'crack',
	'engineer',
	'entrance',
	'grass',
	'hell',
	'island',
	'joke',
	'jury',
	'leg',
	'lip',
	'mate',
	'motor',
	'nerve',
	'passage',
	'pen',
	'priest',
	'prize',
	'promise',
	'resort',
	'ring',
	'roof',
	'rope',
	'sail',
	'scheme',
	'script',
	'sock',
	'station',
	'toe',
	'tower',
	'truck',
	'witness',
	'beaver',
	'lubricant',
	'bastard',
	'dildo',
	'abortion',
	'addict',
	'bible',
	'prostitute',
	'bomb',
	'vibrator',
	'swallow',
	'plague',
	'vaccine',
	'equality',
]

function getRandomNoun() {
	const idx = Math.floor(Math.random() * nouns.length)
	return nouns[idx]
}

var noSleep = new NoSleep()

function updateNoun() {
	document.getElementById('word').innerHTML = getRandomNoun()
}

let loadingAnim = null

function showLoadingAnimation() {
	loadingAnim.start()
	document.getElementById('word').style.display = 'none'
	document.getElementById('loading').style.display = 'inline-block'
}

function hideLoadingAnimation() {
	loadingAnim.stop()
	document.getElementById('word').style.display = 'inline-block'
	document.getElementById('loading').style.display = 'none'
}

let bNewWordDisabled = false

function newWord() {
	if (bNewWordDisabled)
		return;

	bNewWordDisabled = true

	showLoadingAnimation()
	setTimeout(() => {
		bNewWordDisabled = false
		updateNoun()
		hideLoadingAnimation()
	}, 3000);
}

function tally() {
	alert(`Your score is ${gameState.points}`)
	newGame()
}

function updateDisplays() {
	document.getElementById('round').innerHTML = `${gameState.round}<span style="font-size:3vmin;">&nbsp;/&nbsp;</span>${gameState.roundCount}`
	document.getElementById('points').innerHTML = `${gameState.points}`
}

function newGame() {
	gameState.points = 0
	gameState.round = 1
	gameState.roundCount = 13

	updateDisplays()
	newWord()
}

function resultFailure() {
	if (isLastRound()) {
		return tally()
	}

	gameState.round += 2
	updateDisplays()

	newWord()
}

function resultSkip() {
	if (isLastRound()) {
		return tally()
	}

	gameState.round += 1
	updateDisplays()

	newWord()
}

function resultSuccess() {
	gameState.points += 1
	updateDisplays()

	if (isLastRound()) {
		return tally()
	}

	gameState.round += 1
	updateDisplays()

	newWord()
}

function isLastRound() {
	return gameState.round >= gameState.roundCount
}

function newGameConfirm() {
	if (confirm('Start a new game?')) {
		newGame()
	}
}

const gameState = {
	points: 0,
	round: 1,
	roundCount: 13
}

window.onload = function() {
	loadingAnim = new LoadingAnimation('loading')

	document.getElementById('logo').onclick = newWord
	document.getElementById('full-screen-button').onclick = toggleFullscreen
	document.getElementById('new-game').onclick = newGameConfirm
	document.getElementById('result-failure').onclick = resultFailure
	document.getElementById('result-skip').onclick = resultSkip
	document.getElementById('result-success').onclick = resultSuccess

	newGame()
	// newWord()
	// loadingAnim.start()
}

var isFullscreen = false

function toggleFullscreen() {
	if (isFullscreen) {
		document.getElementById('full-screen-button').className = 'maximize'
		document.exitFullscreen()
		isFullscreen = false
	} else {
		document.getElementById('full-screen-button').className = 'minimize'
		document.getElementById('body').requestFullscreen()
		isFullscreen = true
	}
}





